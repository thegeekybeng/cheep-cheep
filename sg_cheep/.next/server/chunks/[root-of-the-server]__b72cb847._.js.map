{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///Users/ymca/_dev_work_/_WIP_IDEAS/_cheepnow/1_2_cheep/sg_cheep/app/api/search/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { destination, checkIn, checkOut, guests, rooms } = await request.json()\n\n    // Validate required fields\n    if (!destination || !checkIn || !checkOut) {\n      return NextResponse.json(\n        { error: 'Missing required fields: destination, checkIn, checkOut' },\n        { status: 400 }\n      )\n    }\n\n    // In a real implementation, this would:\n    // 1. Query multiple hotel booking APIs simultaneously\n    // 2. Normalize the data from different providers\n    // 3. Calculate best prices and savings vs Priceline\n    // 4. Return sorted results\n\n    // Mock data for demonstration - Singapore hotels\n    const mockHotels = [\n      {\n        id: 'mbs001',\n        name: 'Marina Bay Sands',\n        rating: 4.5,\n        reviewCount: 15420,\n        location: 'Marina Bay, Singapore',\n        description: 'Iconic luxury hotel with infinity pool overlooking Singapore skyline',\n        image: 'https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=300&fit=crop',\n        amenities: ['Infinity Pool', 'Casino', 'Shopping Mall', 'Spa', 'Fine Dining'],\n        prices: [\n          { platform: 'Booking.com', price: 450, url: 'https://booking.com/...', availability: true },\n          { platform: 'Agoda', price: 420, url: 'https://agoda.com/...', availability: true },\n          { platform: 'Trip.com', price: 435, url: 'https://trip.com/...', availability: true },\n          { platform: 'Google Travel', price: 440, url: 'https://travel.google.com/...', availability: true },\n          { platform: 'Priceline', price: 480, url: 'https://priceline.com/...', availability: true }\n        ],\n        bestPrice: 420,\n        bestPlatform: 'Agoda',\n        savings: 60\n      },\n      {\n        id: 'raffles001',\n        name: 'Raffles Singapore',\n        rating: 4.8,\n        reviewCount: 8900,\n        location: 'City Centre, Singapore',\n        description: 'Historic luxury hotel in the heart of Singapore',\n        image: 'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=400&h=300&fit=crop',\n        amenities: ['Historic Building', 'Butler Service', 'Spa', 'Fine Dining', 'Bar'],\n        prices: [\n          { platform: 'Booking.com', price: 680, url: 'https://booking.com/...', availability: true },\n          { platform: 'Agoda', price: 650, url: 'https://agoda.com/...', availability: true },\n          { platform: 'Trip.com', price: 670, url: 'https://trip.com/...', availability: true },\n          { platform: 'Google Travel', price: 660, url: 'https://travel.google.com/...', availability: true },\n          { platform: 'Priceline', price: 720, url: 'https://priceline.com/...', availability: true }\n        ],\n        bestPrice: 650,\n        bestPlatform: 'Agoda',\n        savings: 70\n      },\n      {\n        id: 'shangri001',\n        name: 'Shangri-La Hotel Singapore',\n        rating: 4.6,\n        reviewCount: 12300,\n        location: 'Orchard Road, Singapore',\n        description: 'Garden oasis in the city with award-winning restaurants',\n        image: 'https://images.unsplash.com/photo-1571896349842-33c89424de2d?w=400&h=300&fit=crop',\n        amenities: ['Garden View', 'Pool', 'Restaurants', 'Shopping Access', 'Spa'],\n        prices: [\n          { platform: 'Booking.com', price: 380, url: 'https://booking.com/...', availability: true },\n          { platform: 'Agoda', price: 360, url: 'https://agoda.com/...', availability: true },\n          { platform: 'Trip.com', price: 375, url: 'https://trip.com/...', availability: true },\n          { platform: 'Google Travel', price: 370, url: 'https://travel.google.com/...', availability: true },\n          { platform: 'Priceline', price: 410, url: 'https://priceline.com/...', availability: true }\n        ],\n        bestPrice: 360,\n        bestPlatform: 'Agoda',\n        savings: 50\n      },\n      {\n        id: 'ritz001',\n        name: 'The Ritz-Carlton, Millenia Singapore',\n        rating: 4.7,\n        reviewCount: 9800,\n        location: 'Marina Centre, Singapore',\n        description: 'Luxury hotel with stunning harbor views and world-class service',\n        image: 'https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop',\n        amenities: ['Harbor View', 'Club Lounge', 'Spa', 'Pool', 'Fine Dining'],\n        prices: [\n          { platform: 'Booking.com', price: 520, url: 'https://booking.com/...', availability: true },\n          { platform: 'Agoda', price: 495, url: 'https://agoda.com/...', availability: true },\n          { platform: 'Trip.com', price: 510, url: 'https://trip.com/...', availability: true },\n          { platform: 'Google Travel', price: 505, url: 'https://travel.google.com/...', availability: true },\n          { platform: 'Priceline', price: 550, url: 'https://priceline.com/...', availability: true }\n        ],\n        bestPrice: 495,\n        bestPlatform: 'Agoda',\n        savings: 55\n      },\n      {\n        id: 'mandarin001',\n        name: 'Mandarin Oriental Singapore',\n        rating: 4.6,\n        reviewCount: 7200,\n        location: 'Marina Bay, Singapore',\n        description: 'Contemporary luxury with Oriental heritage and exceptional service',\n        image: 'https://images.unsplash.com/photo-1564501049412-61c2a3083791?w=400&h=300&fit=crop',\n        amenities: ['City View', 'Oriental Spa', 'Pool', 'Business Center', 'Restaurants'],\n        prices: [\n          { platform: 'Booking.com', price: 410, url: 'https://booking.com/...', availability: true },\n          { platform: 'Agoda', price: 385, url: 'https://agoda.com/...', availability: true },\n          { platform: 'Trip.com', price: 400, url: 'https://trip.com/...', availability: true },\n          { platform: 'Google Travel', price: 395, url: 'https://travel.google.com/...', availability: true },\n          { platform: 'Priceline', price: 440, url: 'https://priceline.com/...', availability: true }\n        ],\n        bestPrice: 385,\n        bestPlatform: 'Agoda',\n        savings: 55\n      }\n    ]\n\n    // Filter hotels based on destination (simple text match for demo)\n    const filteredHotels = mockHotels.filter(hotel => \n      hotel.location.toLowerCase().includes(destination.toLowerCase()) ||\n      destination.toLowerCase().includes('singapore')\n    )\n\n    // Sort by best savings\n    const sortedHotels = filteredHotels.sort((a, b) => b.savings - a.savings)\n\n    return NextResponse.json({\n      success: true,\n      hotels: sortedHotels,\n      searchParams: { destination, checkIn, checkOut, guests, rooms },\n      totalResults: sortedHotels.length,\n      averageSavings: sortedHotels.reduce((sum, hotel) => sum + hotel.savings, 0) / sortedHotels.length\n    })\n\n  } catch (error) {\n    console.error('Search API error:', error)\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    )\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}